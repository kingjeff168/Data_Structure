Calculate the diameter of a graph represented as an adjacency matrix using the all-pairs shortest paths algorithm.